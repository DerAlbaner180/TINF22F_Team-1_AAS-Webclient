{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\David Bauer\\\\Desktop\\\\Uni\\\\Softwareengineering\\\\TINF22F_Team-1_AAS-Webclient\\\\SOURCE\\\\aas-webclient\\\\src\\\\backend.js\";\nimport { index, Main } from \"./index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let controller = new AbortController();\nconsole.log(\"Start\");\nasync function getData(url) {\n  if (url.search(\"http\") === -1) {\n    alert(\"Not a correct url\");\n    return undefined;\n  }\n  controller = new AbortController();\n  console.log(\"Get data of:\" + url);\n  return fetch(url, {\n    signal: controller.signal,\n    mode: \"cors\"\n  }).then(response => {\n    console.log(response);\n    return response.json().then(jsonResponse => {\n      console.log(jsonResponse);\n      return jsonResponse;\n    }).catch(err => {\n      console.log(err);\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n}\nfunction getLangString(json) {\n  if (\"langStrings\" in json) {\n    let langStrings = json.langStrings;\n    for (let langPref of [\"de\", \"en\"]) {\n      for (let langString of langStrings) {\n        if (langString.language === langPref) {\n          return langString.text;\n        }\n      }\n    }\n  }\n  return \"\";\n}\nfunction extractData(element, id, path, api) {\n  let url = window.sessionStorage.getItem(\"url\");\n  url += \"submodels/\" + btoa(id) + \"/submodelelements\";\n  let returnObject = {};\n  if (api === 3) {\n    for (let nameplateElement of element) {\n      if (nameplateElement.modelType === \"MultiLanguageProperty\") {\n        returnObject[nameplateElement.idShort] = getLangString(nameplateElement.value);\n      } else if (nameplateElement.modelType === \"SubmodelElementCollection\") {\n        returnObject[nameplateElement.idShort] = extractData(nameplateElement.value, id, path + (path.length > 0 ? \".\" : \"\") + nameplateElement.idShort, api);\n      } else if (nameplateElement.modelType === \"Property\") {\n        returnObject[nameplateElement.idShort] = nameplateElement.value;\n      } else if (nameplateElement.modelType === \"File\") {\n        returnObject[\"FilePath\"] = url + \"/\" + path + \".\" + nameplateElement.idShort + \"/attachment\";\n        returnObject[nameplateElement.idShort] = nameplateElement.value;\n      }\n    }\n  } else {\n    for (let nameplateElement of element) {\n      if (nameplateElement.modelType.name === \"MultiLanguageProperty\") {\n        returnObject[nameplateElement.idShort] = getLangString(nameplateElement.value);\n      } else if (nameplateElement.modelType.name === \"SubmodelElementCollection\") {\n        returnObject[nameplateElement.idShort] = extractData(nameplateElement.value, id, path + (path.length > 0 ? \".\" : \"\") + nameplateElement.idShort, api);\n      } else if (nameplateElement.modelType.name === \"Property\") {\n        returnObject[nameplateElement.idShort] = nameplateElement.value;\n      } else if (nameplateElement.modelType.name === \"File\") {\n        returnObject[\"FilePath\"] = url + \"/\" + path + \".\" + nameplateElement.idShort + \"/attachment\";\n        returnObject[nameplateElement.idShort] = nameplateElement.value;\n      }\n    }\n  }\n  return returnObject;\n}\nfunction searchForKey(json, regex) {\n  let returnList = [];\n  if (typeof json === \"object\") {\n    for (let key in json) {\n      if (regex.test(key) && json[\"FilePath\"]) {\n        returnList.push(json[\"FilePath\"]);\n      }\n      returnList = returnList.concat(searchForKey(json[key], regex));\n    }\n  }\n  return returnList;\n}\nasync function getFullShellData() {\n  window.sessionStorage.setItem(\"loaded\", false);\n  let apiVersion;\n  let url = window.sessionStorage.getItem(\"url\");\n  if (!url.endsWith(\"/\")) {\n    url += \"/\";\n    window.sessionStorage.setItem(\"url\", url);\n  }\n  let shells = await getData(url + \"shells\").then(response => {\n    if (response !== undefined) {\n      console.log(response);\n      console.log(typeof response);\n      const entries = Object.entries(response);\n      console.log(entries);\n      console.log(entries[0][1]);\n      console.log(entries[1]);\n      return entries[0][1].map(element => {\n        if (!apiVersion) {\n          if (element[\"submodels\"][0][\"type\"]) {\n            apiVersion = 3;\n          } else {\n            apiVersion = 1;\n          }\n          console.log(apiVersion);\n        }\n        let id = apiVersion === 3 ? element.id : element.identification.id;\n        let submodelIds = [];\n        if (element.submodels) {\n          console.log(\"Element\");\n          console.log(element);\n          console.log(\"Bildpfad: \");\n          console.log(element.assetInformation.defaultThumbnail);\n          for (let i = 0; i < element.submodels.length; i++) {\n            if (element.submodels[i][\"keys\"][0]) {\n              submodelIds.push(element.submodels[i][\"keys\"][0][\"value\"] //Submodelname\n              );\n            }\n          }\n        }\n\n        console.log(\"Submodels\");\n        for (let i = 0; i < submodelIds.length; i++) {\n          console.log(submodelIds[i]);\n        }\n        const mode = window.sessionStorage.getItem(\"mode\");\n        if (mode == \"expert\") {\n          return {\n            idShort: element.idShort,\n            id: id,\n            idEncoded: btoa(id),\n            apiVersion: apiVersion,\n            globalAssetId: element.assetInformation.globalAssetId,\n            Assetsubmodels: submodelIds\n          };\n        } else {\n          return {\n            idShort: element.idShort,\n            id: id\n          };\n        }\n      });\n    }\n  }).catch(err => {\n    console.log(err);\n    window.alert(\"Server l√§dt nicht\");\n  });\n  if (shells !== undefined) {\n    window.sessionStorage.setItem(\"shells\", JSON.stringify(shells));\n    console.log(\"Hier sind die Shells!!!!!!!!!\"); //hier ist irgendwo der Fehler\n    console.log(shells);\n    window.sessionStorage.setItem(\"content\", JSON.stringify(shells));\n    index.render( /*#__PURE__*/_jsxDEV(Main, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 22\n    }, this));\n    console.log(shells);\n    for (let i = 0; i < shells.length; i++) {\n      await loadBody(shells[i]).then(shell => {\n        shells[i] = shell;\n        console.log(shell); //hier irgendwo muss der Fehler sein\n      });\n\n      window.sessionStorage.setItem(\"shells\", JSON.stringify(shells));\n      index.render( /*#__PURE__*/_jsxDEV(Main, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 26\n      }, this));\n    }\n    window.sessionStorage.setItem(\"content\", JSON.stringify(shells));\n    window.sessionStorage.setItem(\"loaded\", true);\n    console.log(shells);\n  }\n}\nasync function loadBody(shell) {\n  console.log(\"lade Body\");\n  let url = window.sessionStorage.getItem(\"url\");\n  url += \"shells/\" + (url.search(\"murr\") === -1 ? btoa(shell.id) : encodeURIComponent(shell.id));\n  url += shell.apiVersion === 3 ? \"/submodels\" : \"/aas/submodels\";\n  if (url.search(\"murr\") !== -1) {\n    let submodelData = [];\n    await getData(url).then(element => {\n      for (let i = 0; i < element.length; i++) {\n        submodelData.push(element[i].idShort);\n      }\n    });\n    shell.submodels = submodelData;\n  }\n  for (let i = 0; i < shell.submodels.length; i++) {\n    await loadSubmodel(shell.submodels[i], url, shell.apiVersion).then(response => {\n      if (response !== undefined) {\n        shell[response.idShort] = response;\n        let images = searchForKey(response, /[pP]roductImage\\d*/);\n        if (images.length > 0) {\n          shell[\"image\"] = images[0];\n          console.log(images[0]);\n        }\n      }\n    });\n  }\n  delete shell.submodels;\n  return shell;\n}\nasync function loadSubmodel(id, url, api) {\n  url += \"/\" + (url.search(\"murr\") === -1 ? btoa(id) : id) + \"/submodel\";\n  return getData(url).then(element => {\n    if (element !== undefined) {\n      if (element.semanticId !== undefined) {\n        return {\n          semanticId: element.semanticId.keys[0] ? element.semanticId.keys[0].value : \"\",\n          idShort: element.idShort,\n          id: element.id,\n          idEncoded: btoa(element.id),\n          ...extractData(element.submodelElements, element.id, \"\", api)\n        };\n      }\n    }\n  });\n}\nexport { getFullShellData, loadBody };","map":{"version":3,"names":["index","Main","controller","AbortController","console","log","getData","url","search","alert","undefined","fetch","signal","mode","then","response","json","jsonResponse","catch","err","getLangString","langStrings","langPref","langString","language","text","extractData","element","id","path","api","window","sessionStorage","getItem","btoa","returnObject","nameplateElement","modelType","idShort","value","length","name","searchForKey","regex","returnList","key","test","push","concat","getFullShellData","setItem","apiVersion","endsWith","shells","entries","Object","map","identification","submodelIds","submodels","assetInformation","defaultThumbnail","i","idEncoded","globalAssetId","Assetsubmodels","JSON","stringify","render","loadBody","shell","encodeURIComponent","submodelData","loadSubmodel","images","semanticId","keys","submodelElements"],"sources":["C:/Users/David Bauer/Desktop/Uni/Softwareengineering/TINF22F_Team-1_AAS-Webclient/SOURCE/aas-webclient/src/backend.js"],"sourcesContent":["import {index, Main} from \"./index\";\r\n\r\nexport let controller = new AbortController();\r\nconsole.log(\"Start\");\r\nasync function getData(url) {\r\n    if (url.search(\"http\") === -1) {\r\n        alert(\"Not a correct url\");\r\n        return undefined;\r\n    }\r\n\r\n    controller = new AbortController();\r\n    console.log(\"Get data of:\"+url);\r\n\r\n    return fetch(url, {\r\n        signal: controller.signal,\r\n        mode: \"cors\"\r\n    })\r\n        .then(response => {\r\n            console.log(response)\r\n            return response.json().then(jsonResponse => {\r\n                console.log(jsonResponse)\r\n                return jsonResponse;\r\n            }).catch(err => {\r\n                console.log(err);\r\n            })\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n}\r\n\r\nfunction getLangString(json) {\r\n    if (\"langStrings\" in json) {\r\n        let langStrings = json.langStrings\r\n        for (let langPref of [\"de\", \"en\"]) {\r\n            for (let langString of langStrings) {\r\n                if (langString.language === langPref) {\r\n                    return langString.text;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\n\r\nfunction extractData(element, id, path, api) {\r\n    let url = window.sessionStorage.getItem(\"url\");\r\n    url += \"submodels/\" + btoa(id) + \"/submodelelements\";\r\n    let returnObject = {};\r\n\r\n    if (api === 3) {\r\n        for (let nameplateElement of element) {\r\n            if (nameplateElement.modelType === \"MultiLanguageProperty\") {\r\n                returnObject[nameplateElement.idShort] = getLangString(nameplateElement.value);\r\n            } else if (nameplateElement.modelType === \"SubmodelElementCollection\") {\r\n                returnObject[nameplateElement.idShort] = extractData(nameplateElement.value, id, path + (path.length > 0 ? \".\" : \"\") + nameplateElement.idShort, api);\r\n            } else if (nameplateElement.modelType === \"Property\") {\r\n                returnObject[nameplateElement.idShort] = nameplateElement.value;\r\n            } else if (nameplateElement.modelType === \"File\") {\r\n                returnObject[\"FilePath\"] = url + \"/\" + path + \".\" + nameplateElement.idShort + \"/attachment\";\r\n                returnObject[nameplateElement.idShort] = nameplateElement.value;\r\n            }\r\n        }\r\n    } else {\r\n        for (let nameplateElement of element) {\r\n            if (nameplateElement.modelType.name === \"MultiLanguageProperty\") {\r\n                returnObject[nameplateElement.idShort] = getLangString(nameplateElement.value);\r\n            } else if (nameplateElement.modelType.name === \"SubmodelElementCollection\") {\r\n                returnObject[nameplateElement.idShort] = extractData(nameplateElement.value, id, path + (path.length > 0 ? \".\" : \"\") + nameplateElement.idShort, api);\r\n            } else if (nameplateElement.modelType.name === \"Property\") {\r\n                returnObject[nameplateElement.idShort] = nameplateElement.value;\r\n            } else if (nameplateElement.modelType.name === \"File\") {\r\n                returnObject[\"FilePath\"] = url + \"/\" + path + \".\" + nameplateElement.idShort + \"/attachment\";\r\n                returnObject[nameplateElement.idShort] = nameplateElement.value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return returnObject;\r\n}\r\n\r\nfunction searchForKey(json, regex) {\r\n    let returnList = [];\r\n    if (typeof json === \"object\") {\r\n        for (let key in json) {\r\n            if (regex.test(key) && json[\"FilePath\"]) {\r\n                returnList.push(json[\"FilePath\"]);\r\n            }\r\n            returnList = returnList.concat(searchForKey(json[key], regex));\r\n        }\r\n    }\r\n    return returnList;\r\n}\r\n\r\nasync function getFullShellData() {\r\n    window.sessionStorage.setItem(\"loaded\", false);\r\n    let apiVersion;\r\n    let url = window.sessionStorage.getItem(\"url\");\r\n    if (!url.endsWith(\"/\")) {\r\n        url += \"/\";\r\n        window.sessionStorage.setItem(\"url\", url);\r\n    }\r\n\r\n    let shells = await getData(url + \"shells\").then( response => {\r\n        if (response !== undefined) {\r\n            console.log(response)\r\n            console.log( typeof response);\r\n            const entries= Object.entries(response)\r\n            console.log(entries)\r\n            console.log(entries[0][1])\r\n            console.log(entries[1])\r\n            return entries[0][1].map(element => {\r\n                if (!apiVersion) {\r\n                    if (element[\"submodels\"][0][\"type\"]) {\r\n                        apiVersion = 3;\r\n                    } else {\r\n                        apiVersion = 1;\r\n                    }\r\n                    console.log(apiVersion);\r\n                }\r\n\r\n                let id = apiVersion === 3 ? element.id : element.identification.id;\r\n\r\n                let submodelIds = [];\r\n                if (element.submodels) {\r\n                    console.log(\"Element\")\r\n                    console.log(element)\r\n\r\n                    console.log(\"Bildpfad: \")\r\n                    console.log(element.assetInformation.defaultThumbnail)\r\n                    for (let i = 0; i < element.submodels.length; i++) {\r\n                        if (element.submodels[i][\"keys\"][0]) {\r\n                            submodelIds.push(\r\n                                element.submodels[i][\"keys\"][0][\"value\"] //Submodelname\r\n                            );\r\n                        }\r\n                    }\r\n                }\r\n                console.log(\"Submodels\")\r\n                for(let i=0; i<submodelIds.length;i++){\r\n                    console.log(submodelIds[i])\r\n\r\n                }\r\n                const mode=window.sessionStorage.getItem(\"mode\");\r\n                if (mode==\"expert\"){\r\n                    return {\r\n                        idShort: element.idShort,\r\n                        id: id,\r\n                        idEncoded: btoa(id),\r\n                        apiVersion: apiVersion,\r\n                        globalAssetId: element.assetInformation.globalAssetId,\r\n                        Assetsubmodels: submodelIds\r\n                    };\r\n\r\n                }else {\r\n                    return {\r\n                        idShort: element.idShort,\r\n                        id: id,\r\n                    };\r\n                }\r\n            });\r\n        }\r\n    }).catch(err => {\r\n        console.log(err)\r\n        window.alert(\"Server l√§dt nicht\")\r\n    });\r\n\r\n    if (shells !== undefined) {\r\n        window.sessionStorage.setItem(\"shells\", JSON.stringify(shells));\r\n        console.log(\"Hier sind die Shells!!!!!!!!!\"); //hier ist irgendwo der Fehler\r\n        console.log(shells);\r\n        window.sessionStorage.setItem(\"content\", JSON.stringify(shells));\r\n        index.render(<Main/>);\r\n\r\n        console.log(shells);\r\n        for (let i = 0; i < shells.length; i++) {\r\n            await loadBody(shells[i]).then(shell => {\r\n                shells[i] = shell;\r\n                console.log(shell); //hier irgendwo muss der Fehler sein\r\n            });\r\n            window.sessionStorage.setItem(\"shells\", JSON.stringify(shells));\r\n            index.render(<Main/>);\r\n        }\r\n        window.sessionStorage.setItem(\"content\", JSON.stringify(shells));\r\n        window.sessionStorage.setItem(\"loaded\", true);\r\n        console.log(shells);\r\n    }\r\n}\r\n\r\nasync function loadBody(shell) {\r\n    console.log(\"lade Body\")\r\n    let url = window.sessionStorage.getItem(\"url\");\r\n    url += \"shells/\" + (url.search(\"murr\") === -1 ? btoa(shell.id) : encodeURIComponent(shell.id));\r\n    url += (shell.apiVersion === 3 ? \"/submodels\" : \"/aas/submodels\");\r\n\r\n\r\n    if (url.search(\"murr\") !== -1) {\r\n        let submodelData = [];\r\n        await getData(url).then(element => {\r\n            for (let i = 0; i < element.length; i++) {\r\n                submodelData.push(element[i].idShort);\r\n            }\r\n        });\r\n        shell.submodels = submodelData;\r\n    }\r\n\r\n    for (let i = 0; i < shell.submodels.length; i++) {\r\n        await loadSubmodel(shell.submodels[i], url, shell.apiVersion).then(response => {\r\n            if (response !== undefined) {\r\n                shell[response.idShort] = response;\r\n                let images = searchForKey(response, /[pP]roductImage\\d*/);\r\n                if (images.length > 0) {\r\n                    shell[\"image\"] = images[0];\r\n                    console.log(images[0]);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    delete shell.submodels;\r\n    return shell;\r\n}\r\n\r\nasync function loadSubmodel(id, url, api) {\r\n    url += \"/\" + (url.search(\"murr\") === -1 ? btoa(id) : id) + \"/submodel\"\r\n    return getData(url).then(element => {\r\n        if (element !== undefined) {\r\n            if (element.semanticId !== undefined) {\r\n                return {\r\n                    semanticId: (element.semanticId.keys[0] ? element.semanticId.keys[0].value : \"\"),\r\n                    idShort: element.idShort,\r\n                    id: element.id,\r\n                    idEncoded: btoa(element.id),\r\n                    ...extractData(element.submodelElements, element.id, \"\", api),\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport {getFullShellData, loadBody}"],"mappings":"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"},"metadata":{},"sourceType":"module"}